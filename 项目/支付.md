[toc]

# RocketMQ异步处理

为了提高项目的并发量，将项目中主干业务(渠道支付、商户回调)和核心业务(记账和失败重试)**拆分成异步**，主干业务中只处理三方请求和核心业务需要的消费型数据入库或缓存，将访问量大的业务拆分成**异步批量**处理

## 渠道支付



## 商户回调

## 账单入库

## 失败重试

## 主干业务中只处理三方请求入库或缓存

## 核心业务需要的消费型数据入库或缓存

## 主干业务

## 如何拆分成异步批量处理

# 支付问题

1 你们有几种支付方式，有没有自己支付网关，支付网关是不是把所有的支付方式都聚合了，怎么做设计的

2 支付回调，是不是都统一了，方便管理，没有收到回掉怎么办，还有如果暴露的回调接口是如何保证安全，如何验证正确性

3 重复支付问题，也就是幂等怎么解决的，从订单到支付过程都要说一遍怎么解决

4 支付过程，你有没有涉及到其他业务的调用，分布式事务如何解决

5 对账怎么做的，这些你应该可以讲清楚

6 订单超时未支付取消问题，如何解决，延迟队列 还是定时任务全量

7 如果订单量很大，峰值很高，生成订单写入库，库会有压力，你怎么进行优化

8 风控 如何处理，会不会有交易风险，如何识别

9 退款是怎么操作

10 如果支付流量很大，超过了三方接口限定的流量qps量，你怎么处理